<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2344px" preserveAspectRatio="none" style="width:2742px;height:2344px;" version="1.1" viewBox="0 0 2742 2344" width="2742px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mafio9iorgq3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="63.832" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="1259.0313"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="337.3594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="178" y="1288.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="1288.1641" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="1288.1641" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="188" y1="1288.1641" y2="1288.1641"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="605.9922" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="178" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="1666.3281" y2="2272.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="1666.3281" y2="2272.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="188" y1="2272.3203" y2="2272.3203"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="191.6953" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="309" y="1433.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="1433.8281" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="319" y1="1433.8281" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="319" y1="1433.8281" y2="1433.8281"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="393.3281" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="309" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="1666.3281" y2="2059.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="319" y1="1666.3281" y2="2059.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="319" y1="2059.6563" y2="2059.6563"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="43.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479" y="1902.125"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="1133.9023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="572.5" y="125.1289"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="895.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="803.5" y="334.5234"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="762.6797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011.5" y="438.0859"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1016.5" y="1063.0391"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011.5" y="1787.293"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="308.2266" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="1258.5" y="1317.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1258.5" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268.5" x2="1268.5" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1268.5" y1="1317.2969" y2="1317.2969"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="576.8594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="1258.5" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1258.5" y1="1666.3281" y2="2243.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268.5" x2="1268.5" y1="1666.3281" y2="2243.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1268.5" y1="2243.1875" y2="2243.1875"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="220.8281" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1263.5" y="1404.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1263.5" y1="1404.6953" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1273.5" x2="1273.5" y1="1404.6953" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1273.5" y1="1404.6953" y2="1404.6953"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="428.4609" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1263.5" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1263.5" y1="1666.3281" y2="2094.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1273.5" x2="1273.5" y1="1666.3281" y2="2094.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1273.5" y1="2094.7891" y2="2094.7891"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="558.6875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1399.5" y="467.2188"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="279.0938" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1750" y="1346.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1346.4297" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="1760" y1="1346.4297" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1760" y1="1346.4297" y2="1346.4297"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="547.8594" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1750" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="1760" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1760" y1="2214.1875" y2="2214.1875"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="620.7813"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="887.6406"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1562.3906"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1745.5938"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="128.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1872.9922"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="2135.9219"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2252.5" y="800.2109"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="616.9531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2439" y="408.9531"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="249.9609" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2439" y="1375.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2439" y1="1375.5625" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2449" x2="2449" y1="1375.5625" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2449" y1="1375.5625" y2="1375.5625"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="533.7266" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2439" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2439" y1="1666.3281" y2="2200.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2449" x2="2449" y1="1666.3281" y2="2200.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2449" y1="2200.0547" y2="2200.0547"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="314.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2444" y="1716.4609"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="308.2266" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2593" y="1317.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2593" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2603" x2="2603" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2603" y1="1317.2969" y2="1317.2969"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="547.8594" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2593" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2593" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2603" x2="2603" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2603" y1="2214.1875" y2="2214.1875"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="343.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2689.5" y="1687.3281"/><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1228" y="268.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1235" y="288.2217">Callable</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="1856.5" y="342.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="1863.5" y="362.6514">SharedTaskContext</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="1663.5" y="529.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="1670.5" y="549.4795">AbortableTaskRunnable</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="2020.5" y="733.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="2027.5" y="753.9092">TimeoutGuardTask</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="2652.5" y="853.3389">guard-&lt;n&gt;</text><ellipse cx="2694.5" cy="824.3438" fill="#9999FF" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2690.5,812.3438,2696.5,807.3438,2694.5,812.3438,2696.5,817.3438,2690.5,812.3438" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#EEEEEE" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="108" y="1076.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="115" y="1096.167">CompletableFuture</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="2553.5" y="1166.4639">thread-&lt;n&gt;</text><ellipse cx="2598" cy="1137.4688" fill="#EECCEE" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2594,1125.4688,2600,1120.4688,2598,1125.4688,2600,1130.4688,2594,1125.4688" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="428" y="1496.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="435" y="1516.0889">AbortStrategy</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="42" x2="42" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="42" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="183" y1="1108.8203" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="183" x2="183" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183" x2="183" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="314" x2="314" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314" x2="314" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="484" x2="484" y1="1528.7422" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="484" x2="484" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="484" x2="484" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="577" x2="577" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="577" x2="577" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="577" x2="577" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="808.5" x2="808.5" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="808.5" x2="808.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="808.5" x2="808.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1016" x2="1016" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1016" x2="1016" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1016" x2="1016" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263" x2="1263" y1="300.875" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1263" x2="1263" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263" x2="1263" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1404.5" x2="1404.5" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1404.5" x2="1404.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1404.5" x2="1404.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1754.5" x2="1754.5" y1="562.1328" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1754.5" x2="1754.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1754.5" x2="1754.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1933.5" x2="1933.5" y1="375.3047" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="1933.5" x2="1933.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1933.5" x2="1933.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2095.5" x2="2095.5" y1="766.5625" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2095.5" x2="2095.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2095.5" x2="2095.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2257.5" x2="2257.5" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2257.5" x2="2257.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2257.5" x2="2257.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="2443.5" y1="51.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2443.5" x2="2443.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2443.5" x2="2443.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2597.5" x2="2597.5" y1="1160.6172" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2597.5" x2="2597.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2597.5" x2="2597.5" y1="1666.3281" y2="2290.4531"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2694.5" x2="2694.5" y1="847.4922" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="2694.5" x2="2694.5" y1="1625.5234" y2="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2694.5" x2="2694.5" y1="1666.3281" y2="2290.4531"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="8" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="15" y="35.9951">Service</text><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="8" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="15" y="2309.4482">Service</text><rect fill="#EEEEEE" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="108" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="115" y="2309.4482">CompletableFuture</text><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="268" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="275" y="35.9951">Repository</text><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="268" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="275" y="2309.4482">Repository</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="428" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="435" y="2309.4482">AbortStrategy</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="550" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="557" y="35.9951">Proxy</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="51" x="550" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="557" y="2309.4482">Proxy</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="731.5" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="738.5" y="35.9951">DelegatingExecutor</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="731.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="738.5" y="2309.4482">DelegatingExecutor</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="921" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="928" y="35.9951">ThreadPoolTaskExecutor</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="921" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="928" y="2309.4482">ThreadPoolTaskExecutor</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1228" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1235" y="2309.4482">Callable</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="1311.5" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="1318.5" y="35.9951">AbortableTaskDecorator</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="1311.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="168" x="1318.5" y="2309.4482">AbortableTaskDecorator</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="1663.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="1670.5" y="2309.4482">AbortableTaskRunnable</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="1856.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="1863.5" y="2309.4482">SharedTaskContext</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="2020.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="2027.5" y="2309.4482">TimeoutGuardTask</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2180.5" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2187.5" y="35.9951">GuardTaskExecutor</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="2180.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="2187.5" y="2309.4482">GuardTaskExecutor</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="2344.5" y="16"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="2351.5" y="35.9951">SharedTaskContextHolder</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="2344.5" y="2289.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="181" x="2351.5" y="2309.4482">SharedTaskContextHolder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="2553.5" y="2302.4482">thread-&lt;n&gt;</text><ellipse cx="2598" cy="2321.75" fill="#EECCEE" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2594,2309.75,2600,2304.75,2598,2309.75,2600,2314.75,2594,2309.75" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="2652.5" y="2302.4482">guard-&lt;n&gt;</text><ellipse cx="2694.5" cy="2321.75" fill="#9999FF" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2690.5,2309.75,2696.5,2304.75,2694.5,2309.75,2696.5,2314.75,2690.5,2309.75" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="63.832" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="37" y="1259.0313"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="337.3594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="178" y="1288.1641"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="1288.1641" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="1288.1641" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="188" y1="1288.1641" y2="1288.1641"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="605.9922" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="178" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="1666.3281" y2="2272.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="188" y1="1666.3281" y2="2272.3203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="188" y1="2272.3203" y2="2272.3203"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="191.6953" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="309" y="1433.8281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="1433.8281" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="319" y1="1433.8281" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="319" y1="1433.8281" y2="1433.8281"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="393.3281" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="309" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="309" y1="1666.3281" y2="2059.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="319" y1="1666.3281" y2="2059.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="309" x2="319" y1="2059.6563" y2="2059.6563"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="43.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="479" y="1902.125"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="1133.9023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="572.5" y="125.1289"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="895.375" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="803.5" y="334.5234"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="762.6797" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011.5" y="438.0859"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="34.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1016.5" y="1063.0391"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1011.5" y="1787.293"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="308.2266" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="1258.5" y="1317.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1258.5" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268.5" x2="1268.5" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1268.5" y1="1317.2969" y2="1317.2969"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="576.8594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="1258.5" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1258.5" y1="1666.3281" y2="2243.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1268.5" x2="1268.5" y1="1666.3281" y2="2243.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1258.5" x2="1268.5" y1="2243.1875" y2="2243.1875"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="220.8281" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1263.5" y="1404.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1263.5" y1="1404.6953" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1273.5" x2="1273.5" y1="1404.6953" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1273.5" y1="1404.6953" y2="1404.6953"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="428.4609" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1263.5" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1263.5" y1="1666.3281" y2="2094.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1273.5" x2="1273.5" y1="1666.3281" y2="2094.7891"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1263.5" x2="1273.5" y1="2094.7891" y2="2094.7891"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="558.6875" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1399.5" y="467.2188"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="279.0938" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1750" y="1346.4297"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1346.4297" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="1760" y1="1346.4297" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1760" y1="1346.4297" y2="1346.4297"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="547.8594" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="1750" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1750" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="1760" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1750" x2="1760" y1="2214.1875" y2="2214.1875"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="620.7813"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="887.6406"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1562.3906"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="98.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1745.5938"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="128.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="1872.9922"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="30" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1928.5" y="2135.9219"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2252.5" y="800.2109"/><rect fill="#FFFFFF" filter="url(#f1mafio9iorgq3)" height="616.9531" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2439" y="408.9531"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="249.9609" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2439" y="1375.5625"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2439" y1="1375.5625" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2449" x2="2449" y1="1375.5625" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2449" y1="1375.5625" y2="1375.5625"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="533.7266" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2439" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2439" y1="1666.3281" y2="2200.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2449" x2="2449" y1="1666.3281" y2="2200.0547"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2439" x2="2449" y1="2200.0547" y2="2200.0547"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="314.0625" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2444" y="1716.4609"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="308.2266" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2593" y="1317.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2593" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2603" x2="2603" y1="1317.2969" y2="1625.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2603" y1="1317.2969" y2="1317.2969"/><rect fill="#EECCEE" filter="url(#f1mafio9iorgq3)" height="547.8594" style="stroke: #EECCEE; stroke-width: 1.0;" width="10" x="2593" y="1666.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2593" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2603" x2="2603" y1="1666.3281" y2="2214.1875"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2593" x2="2603" y1="2214.1875" y2="2214.1875"/><rect fill="#9999FF" filter="url(#f1mafio9iorgq3)" height="343.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="2689.5" y="1687.3281"/><polygon fill="#A80036" points="560.5,121.1289,570.5,125.1289,560.5,129.1289,564.5,125.1289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="566.5" y1="125.1289" y2="125.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="49" y="120.1958">getUser()</text><path d="M587,66.2969 L587,166.2969 L1629,166.2969 L1629,76.2969 L1619,66.2969 L587,66.2969 " fill="#FBFB77" filter="url(#f1mafio9iorgq3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1619,66.2969 L1619,76.2969 L1629,76.2969 L1619,66.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="593" y="83.3638">The</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="620" y="83.3638">Repository#getUser()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="784" y="83.3638">method is annotation with the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="979" y="83.3638">@Async</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="431" x="1031" y="83.3638">annotation. The annotation may contain the Spring bean name of a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="1466" y="83.3638">ThreadPoolExecutor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="1610" y="83.3638">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="368" x="593" y="98.4966">This allows looking up specific executors for specific tasks.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="597" y="113.6294"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="593" y="128.7622">Each task</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="659" y="128.7622">must</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="700" y="128.7622">be configured in order create a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="901" y="128.7622">DelegatingExecutor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="426" x="1049" y="128.7622">for it. The executor is registered under the configured task's name.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="597" y="143.895"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="593" y="159.0278">In this sequence the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="726" y="159.0278">DelegatingExecutor</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="874" y="159.0278">is registered under the name</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="1064" y="159.0278">repo.get_user</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="582.5" x2="624.5" y1="222.2266" y2="222.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="624.5" x2="624.5" y1="222.2266" y2="235.2266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="583.5" x2="624.5" y1="235.2266" y2="235.2266"/><polygon fill="#A80036" points="593.5,231.2266,583.5,235.2266,593.5,239.2266,589.5,235.2266" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="589.5" y="217.1606">findExecutor( '</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="680.5" y="217.1606">repo.get_user</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="12" x="784.5" y="217.1606">' )</text><polygon fill="#A80036" points="1216,285.2266,1226,289.2266,1216,293.2266,1220,289.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="582.5" x2="1222" y1="289.2266" y2="289.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="589.5" y="284.2935">new</text><rect fill="#94B57E" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1228" y="268.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="1235" y="288.2217">Callable</text><polygon fill="#A80036" points="791.5,330.5234,801.5,334.5234,791.5,338.5234,795.5,334.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="582.5" x2="797.5" y1="334.5234" y2="334.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="589.5" y="329.5903">execute( callable )</text><polygon fill="#A80036" points="1844.5,359.6563,1854.5,363.6563,1844.5,367.6563,1848.5,363.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813.5" x2="1850.5" y1="363.6563" y2="363.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="820.5" y="358.7231">new( config, this )</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="1856.5" y="342.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="1863.5" y="362.6514">SharedTaskContext</text><polygon fill="#A80036" points="2427,404.9531,2437,408.9531,2427,412.9531,2431,408.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813.5" x2="2433" y1="408.9531" y2="408.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="820.5" y="404.02">register( sharedTaskContext )</text><polygon fill="#A80036" points="999.5,434.0859,1009.5,438.0859,999.5,442.0859,1003.5,438.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813.5" x2="1005.5" y1="438.0859" y2="438.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="820.5" y="433.1528">execute( callable )</text><polygon fill="#A80036" points="1387.5,463.2188,1397.5,467.2188,1387.5,471.2188,1391.5,467.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1021.5" x2="1393.5" y1="467.2188" y2="467.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1028.5" y="462.2856">decorate( callable )</text><polygon fill="#A80036" points="2427,492.3516,2437,496.3516,2427,500.3516,2431,496.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="2433" y1="496.3516" y2="496.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="1416.5" y="491.4185">sharedTaskContext = get( )</text><polygon fill="#A80036" points="1651.5,546.4844,1661.5,550.4844,1651.5,554.4844,1655.5,550.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="1657.5" y1="550.4844" y2="550.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="1416.5" y="545.5513">new( runnable, sharedTaskContext )</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="1663.5" y="529.4844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="165" x="1670.5" y="549.4795">AbortableTaskRunnable</text><polygon fill="#A80036" points="1916.5,616.7813,1926.5,620.7813,1916.5,624.7813,1920.5,620.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="1922.5" y1="620.7813" y2="620.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="1416.5" y="615.8481">registerRemovalStrategy( guarded )</text><polygon fill="#A80036" points="2008.5,750.9141,2018.5,754.9141,2008.5,758.9141,2012.5,754.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="2014.5" y1="754.9141" y2="754.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="166" x="1416.5" y="749.981">new( sharedTaskContext )</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="2020.5" y="733.9141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="2027.5" y="753.9092">TimeoutGuardTask</text><polygon fill="#A80036" points="2240.5,796.2109,2250.5,800.2109,2240.5,804.2109,2244.5,800.2109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="2246.5" y1="800.2109" y2="800.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="334" x="1416.5" y="795.2778">schedule( guard, sharedTaskContext.getTimeout( ) )</text><polygon fill="#CCCCCC" points="2640.5,825.3438,2650.5,829.3438,2640.5,833.3438,2644.5,829.3438" style="stroke: #CCCCCC; stroke-width: 1.0;"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2257.5" x2="2646.5" y1="829.3438" y2="829.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="2264.5" y="824.4106">new</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="2652.5" y="853.3389">guard-&lt;n&gt;</text><ellipse cx="2694.5" cy="824.3438" fill="#9999FF" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2690.5,812.3438,2696.5,807.3438,2694.5,812.3438,2696.5,817.3438,2690.5,812.3438" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1916.5,883.6406,1926.5,887.6406,1916.5,891.6406,1920.5,887.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1409.5" x2="1922.5" y1="887.6406" y2="887.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="1416.5" y="882.7075">registerRemoveTimeoutGuardStrategy( guard )</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1021.5" x2="1031.5" y1="996.7734" y2="992.7734"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1021.5" x2="1031.5" y1="996.7734" y2="1000.7734"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1021.5" x2="1398.5" y1="996.7734" y2="996.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="1038.5" y="991.8403">abortableTaskRunnable</text><polygon fill="#A80036" points="2432,1021.9063,2442,1025.9063,2432,1029.9063,2436,1025.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1404.5" x2="2438" y1="1025.9063" y2="1025.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="1411.5" y="1020.9731">remove()</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1021.5" x2="1068.5" y1="1050.1719" y2="1050.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1068.5" x2="1068.5" y1="1050.1719" y2="1063.1719"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1027.5" x2="1068.5" y1="1063.1719" y2="1063.1719"/><polygon fill="#A80036" points="1037.5,1059.1719,1027.5,1063.1719,1037.5,1067.1719,1033.5,1063.1719" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="1033.5" y="1045.106">enqueue( abortableTaskRunnable )</text><polygon fill="#A80036" points="269,1093.1719,259,1097.1719,269,1101.1719,265,1097.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263" x2="1010.5" y1="1097.1719" y2="1097.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="275" y="1092.2388">new</text><rect fill="#EEEEEE" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="146" x="108" y="1076.1719"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="132" x="115" y="1096.167">CompletableFuture</text><polygon fill="#CCCCCC" points="2541.5,1138.4688,2551.5,1142.4688,2541.5,1146.4688,2545.5,1142.4688" style="stroke: #CCCCCC; stroke-width: 1.0;"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1021.5" x2="2547.5" y1="1142.4688" y2="1142.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="1028.5" y="1137.5356">new</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="2553.5" y="1166.4639">thread-&lt;n&gt;</text><ellipse cx="2598" cy="1137.4688" fill="#EECCEE" filter="url(#f1mafio9iorgq3)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="2594,1125.4688,2600,1120.4688,2598,1125.4688,2600,1130.4688,2594,1125.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813.5" x2="823.5" y1="1200.7656" y2="1196.7656"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="813.5" x2="823.5" y1="1200.7656" y2="1204.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="813.5" x2="1015.5" y1="1200.7656" y2="1200.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="830.5" y="1195.8325">CompletableFuture&lt;User&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="582.5" x2="592.5" y1="1229.8984" y2="1225.8984"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="582.5" x2="592.5" y1="1229.8984" y2="1233.8984"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="582.5" x2="807.5" y1="1229.8984" y2="1229.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="599.5" y="1224.9653">CompletableFuture&lt;User&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="57" y1="1259.0313" y2="1255.0313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="47" x2="57" y1="1259.0313" y2="1263.0313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="47" x2="576.5" y1="1259.0313" y2="1259.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="64" y="1254.0981">CompletableFuture&lt;User&gt;</text><polygon fill="#A80036" points="166,1284.1641,176,1288.1641,166,1292.1641,170,1288.1641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42" x2="172" y1="1288.1641" y2="1288.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="49" y="1283.231">get()</text><polygon fill="#A80036" points="1246.5,1313.2969,1256.5,1317.2969,1246.5,1321.2969,1250.5,1317.2969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188" x2="1252.5" y1="1317.2969" y2="1317.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="195" y="1312.3638">get()</text><polygon fill="#A80036" points="1771,1342.4297,1761,1346.4297,1771,1350.4297,1767,1346.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1765" x2="2592" y1="1346.4297" y2="1346.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1777" y="1341.4966">run</text><polygon fill="#A80036" points="2427,1371.5625,2437,1375.5625,2427,1379.5625,2431,1375.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="2433" y1="1375.5625" y2="1375.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="1767" y="1370.6294">register( sharedTaskContext )</text><polygon fill="#A80036" points="1284.5,1400.6953,1274.5,1404.6953,1284.5,1408.6953,1280.5,1404.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1278.5" x2="1749" y1="1404.6953" y2="1404.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="21" x="1290.5" y="1399.7622">run</text><polygon fill="#A80036" points="330,1429.8281,320,1433.8281,330,1437.8281,326,1433.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="1262.5" y1="1433.8281" y2="1433.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="336" y="1428.895">getUser()</text><polygon fill="#A80036" points="2427,1483.9609,2437,1487.9609,2427,1491.9609,2431,1487.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="2433" y1="1487.9609" y2="1487.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="326" y="1483.0278">sharedContext = get( )</text><polygon fill="#A80036" points="416,1513.0938,426,1517.0938,416,1521.0938,420,1517.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="422" y1="1517.0938" y2="1517.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="326" y="1512.1606">new( ... )</text><rect fill="#99CCFF" filter="url(#f1mafio9iorgq3)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="428" y="1496.0938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="435" y="1516.0889">AbortStrategy</text><polygon fill="#A80036" points="1916.5,1558.3906,1926.5,1562.3906,1916.5,1566.3906,1920.5,1562.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="319" x2="1922.5" y1="1562.3906" y2="1562.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="326" y="1557.4575">registerAbortStrategy( abortStrategy )</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1309.75" y="1649.7339"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="117" x="1309.75" y="1649.7339">This takes a while</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1430.75" y="1649.7339"/><polygon fill="#9999FF" points="2677.5,1683.3281,2687.5,1687.3281,2677.5,1691.3281,2681.5,1687.3281" style="stroke: #9999FF; stroke-width: 1.0;"/><line style="stroke: #9999FF; stroke-width: 1.0;" x1="2257.5" x2="2683.5" y1="1687.3281" y2="1687.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="2264.5" y="1682.395">timeout</text><polygon fill="#A80036" points="2465,1712.4609,2455,1716.4609,2465,1720.4609,2461,1716.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2459" x2="2688.5" y1="1716.4609" y2="1716.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="190" x="2471" y="1711.5278">register( sharedTaskContext )</text><polygon fill="#A80036" points="1949.5,1741.5938,1939.5,1745.5938,1949.5,1749.5938,1945.5,1745.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1943.5" x2="2688.5" y1="1745.5938" y2="1745.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="1955.5" y="1740.6606">removeTask( )</text><polygon fill="#A80036" points="1032.5,1783.293,1022.5,1787.293,1032.5,1791.293,1028.5,1787.293" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1026.5" x2="1927.5" y1="1787.293" y2="1787.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="1038.5" y="1782.3599">remove( AbortableTaskRunnable )</text><path d="M746,1758.7266 L746,1798.7266 L1002,1798.7266 L1002,1768.7266 L992,1758.7266 L746,1758.7266 " fill="#FBFB77" filter="url(#f1mafio9iorgq3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M992,1758.7266 L992,1768.7266 L1002,1768.7266 L992,1758.7266 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="752" y="1775.7935">Since the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="816" y="1775.7935">AbortableTaskRunnable</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="752" y="1790.9263">is already running, this does nothing.</text><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2687.5" x2="2677.5" y1="1843.9922" y2="1839.9922"/><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2687.5" x2="2677.5" y1="1843.9922" y2="1847.9922"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1933.5" x2="2688.5" y1="1843.9922" y2="1843.9922"/><polygon fill="#A80036" points="1949.5,1868.9922,1939.5,1872.9922,1949.5,1876.9922,1945.5,1872.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1943.5" x2="2688.5" y1="1872.9922" y2="1872.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="1955.5" y="1868.0591">abortTask( )</text><polygon fill="#A80036" points="500,1898.125,490,1902.125,500,1906.125,496,1902.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="1927.5" y1="1902.125" y2="1902.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="506" y="1897.1919">invoke( )</text><polygon fill="#A80036" points="330,1927.2578,320,1931.2578,330,1935.2578,326,1931.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="324" x2="478" y1="1931.2578" y2="1931.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="336" y="1926.3247">force_stop_working( )</text><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="1926.5" x2="1916.5" y1="1945.3906" y2="1941.3906"/><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="1926.5" x2="1916.5" y1="1945.3906" y2="1949.3906"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="484" x2="1927.5" y1="1945.3906" y2="1945.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1938.5" x2="1980.5" y1="1974.5234" y2="1974.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1980.5" x2="1980.5" y1="1974.5234" y2="1987.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1939.5" x2="1980.5" y1="1987.5234" y2="1987.5234"/><polygon fill="#A80036" points="1949.5,1983.5234,1939.5,1987.5234,1949.5,1991.5234,1945.5,1987.5234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="1945.5" y="1969.4575">setAborted( )</text><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2687.5" x2="2677.5" y1="2001.5234" y2="1997.5234"/><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2687.5" x2="2677.5" y1="2001.5234" y2="2005.5234"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1933.5" x2="2688.5" y1="2001.5234" y2="2001.5234"/><polygon fill="#A80036" points="2460,2026.5234,2450,2030.5234,2460,2034.5234,2456,2030.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="2454" x2="2693.5" y1="2030.5234" y2="2030.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="2466" y="2025.5903">remove( )</text><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1261.5" x2="1251.5" y1="2059.6563" y2="2055.6563"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1261.5" x2="1251.5" y1="2059.6563" y2="2063.6563"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="314" x2="1262.5" y1="2059.6563" y2="2059.6563"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="361" y="2054.7231">Exception</text><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1273.5" x2="1315.5" y1="2093.9219" y2="2093.9219"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1315.5" x2="1315.5" y1="2093.9219" y2="2106.9219"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1268.5" x2="1315.5" y1="2106.9219" y2="2106.9219"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1268.5" x2="1278.5" y1="2106.9219" y2="2102.9219"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="1268.5" x2="1278.5" y1="2106.9219" y2="2110.9219"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="1320.5" y="2088.856">Exception</text><polygon fill="#A80036" points="1916.5,2131.9219,1926.5,2135.9219,1916.5,2139.9219,1920.5,2135.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="1922.5" y1="2135.9219" y2="2135.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="43" x="1767" y="2130.9888">finish()</text><path d="M1943,2114.9219 L1943,2139.9219 L2384,2139.9219 L2384,2124.9219 L2374,2114.9219 L1943,2114.9219 " fill="#FBFB77" filter="url(#f1mafio9iorgq3)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2374,2114.9219 L2374,2124.9219 L2384,2124.9219 L2374,2114.9219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="1949" y="2131.9888">Since the task is aborted the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="2137" y="2131.9888">TimeoutGuardTask</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="2269" y="2131.9888">is not removed.</text><polygon fill="#A80036" points="2432,2196.0547,2442,2200.0547,2432,2204.0547,2436,2200.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1760" x2="2438" y1="2200.0547" y2="2200.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="1767" y="2195.1216">remove()</text><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2596" x2="2586" y1="2214.1875" y2="2210.1875"/><line style="stroke: #CCCCCC; stroke-width: 1.0;" x1="2596" x2="2586" y1="2214.1875" y2="2218.1875"/><line style="stroke: #CCCCCC; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1755" x2="2597" y1="2214.1875" y2="2214.1875"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="188" x2="198" y1="2243.1875" y2="2239.1875"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="188" x2="198" y1="2243.1875" y2="2247.1875"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="188" x2="1262.5" y1="2243.1875" y2="2243.1875"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="245" y="2238.2544">Exception</text><line style="stroke: #FF0000; stroke-width: 1.0;" x1="42" x2="52" y1="2272.3203" y2="2268.3203"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="42" x2="52" y1="2272.3203" y2="2276.3203"/><line style="stroke: #FF0000; stroke-width: 1.0;" x1="42" x2="182" y1="2272.3203" y2="2272.3203"/><text fill="#FF0000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="99" y="2267.3872">Exception</text><!--
@startuml

participant svc as "Service" #fff
participant future as "CompletableFuture" #eee
participant repo as "Repository" #fff
participant abort as "AbortStrategy" #99ccff
participant proxy as "Proxy" #94b57e
participant delegating_exec as "DelegatingExecutor" #99ccff
participant executor as "ThreadPoolTaskExecutor" #94b57e
participant callable as "Callable" #94b57e

participant decorator as "AbortableTaskDecorator" #99ccff
participant guarded as "AbortableTaskRunnable" #99ccff
participant shared as "SharedTaskContext" #99ccff
participant guard as "TimeoutGuardTask" #99ccff
participant guard_executor as "GuardTaskExecutor" #99ccff
participant thread_local as "SharedTaskContextHolder" #99ccff

control thread as "thread-<n>" #ece

control guard_thread as "guard-<n>" #99f

activate svc
  svc -> proxy : getUser()
deactivate svc
note right
  The ""Repository#getUser()"" method is annotation with the ""@Async"" annotation. The annotation may contain the Spring bean name of a ""ThreadPoolExecutor"".
  This allows looking up specific executors for specific tasks.

  Each task **must** be configured in order create a ""DelegatingExecutor"" for it. The executor is registered under the configured task's name.

  In this sequence the ""DelegatingExecutor"" is registered under the name ""repo.get_user""
end note
|||
activate proxy

  proxy -> proxy : findExecutor( '""repo.get_user""' )
  |||

  create callable
  proxy -> callable : new
  proxy -> delegating_exec : execute( callable )

  activate delegating_exec
    create shared
    delegating_exec -> shared : new( config, this )

    delegating_exec -> thread_local : register( sharedTaskContext )
    activate thread_local

    delegating_exec -> executor : execute( callable )
    activate executor
      executor -> decorator : decorate( callable )
      activate decorator
        decorator -> thread_local : sharedTaskContext = get( )
        |||
        create guarded
        decorator -> guarded : new( runnable, sharedTaskContext )

        |||
        decorator -> shared : registerRemovalStrategy( guarded )
        activate shared
        deactivate shared
        |||
        |||
        |||

        create guard
        decorator -> guard : new( sharedTaskContext )
        decorator -> guard_executor : schedule( guard, sharedTaskContext.getTimeout( ) )
        activate guard_executor
          create guard_thread
          guard_executor -[#ccc]-> guard_thread : new
        deactivate guard_executor
        decorator -> shared : registerRemoveTimeoutGuardStrategy( guard )
        activate shared
        deactivate shared
        |||
        |||

        decorator - ->> executor : abortableTaskRunnable

        decorator -> thread_local : remove()
        deactivate thread_local
      deactivate decorator

      executor -> executor : enqueue( abortableTaskRunnable )
      activate executor
        create future
        executor -> future : new
      deactivate executor

      create thread
      executor -[#ccc]-> thread : new



      executor - ->> delegating_exec : CompletableFuture<User>
    deactivate executor
    delegating_exec - ->> proxy : CompletableFuture<User>
  deactivate delegating_exec
  proxy - ->> svc : CompletableFuture<User>
deactivate proxy

activate svc
  svc -> future : get()
deactivate svc

activate future
  future -> callable : get()
  activate callable

activate thread #ece
  thread -> guarded : run
  activate guarded #ece
    guarded -> thread_local : register( sharedTaskContext )
    activate thread_local #ece

    guarded -> callable : run
    activate callable #ece
      callable -> repo : getUser()

      activate repo #ece
        |||
        repo -> thread_local : sharedContext = get( )
        create abort
        repo -> abort : new( ... )
        repo -> shared : registerAbortStrategy( abortStrategy )
        activate shared #ece
        deactivate shared
        |||
        ... **This takes a while** ...

        guard_executor -[#99f]> guard_thread : timeout
        activate guard_thread #99f
          guard_thread -> thread_local : register( sharedTaskContext )
          activate thread_local #99f

          guard_thread -> shared : removeTask( )
          activate shared #99f
            shared -> executor : remove( AbortableTaskRunnable )
            activate executor #99f
              note left
                Since the ""AbortableTaskRunnable""
                is already running, this does nothing.
              end note
            deactivate executor
            shared -[#ccc]->> guard_thread
          deactivate shared

          guard_thread -> shared : abortTask( )

          activate shared #99f
            shared -> abort : invoke( )
            activate abort #99f
              abort -> repo : force_stop_working( )

              abort -[#ccc]->> shared
            deactivate abort
            shared -> shared : setAborted( )

            shared -[#ccc]->> guard_thread
          deactivate shared
          guard_thread -> thread_local : remove( )
          deactivate thread_local
        deactivate guard_thread
        repo -[#f00]>> callable : **<font color="#ff0000">\tException</font>**
      deactivate repo
      callable -[#f00]>> callable : **<font color="#ff0000">\tException</font>**
    deactivate callable

    guarded -> shared : finish()
    activate shared #ece
      note right
        Since the task is aborted the ""TimeoutGuardTask"" is not removed.
      end note
    deactivate shared
    guarded -> thread_local : remove()
    deactivate thread_local
    guarded -[#ccc]->> thread
  deactivate guarded
deactivate thread

    callable -[#f00]>> future : **<font color="#ff0000">\tException</font>**
  deactivate callable

  future -[#f00]>> svc : **<font color="#ff0000">\tException</font>**
deactivate future
@enduml

PlantUML version 1.2018.01(Sun Jan 28 18:08:22 UTC 2018)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 11.0.1+13-LTS
Operating System: Linux
OS Version: 4.14.12-041412-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>