<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="author" content="Marcel Overdijk">
<title>Hawaii Framework Reference Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote::before{display:none}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{word-spacing:0;line-height:1.6}
.quoteblock.abstract blockquote::before,.quoteblock.abstract p::before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
<h1>Hawaii Framework Reference Documentation</h1>
<div class="details">
<span id="author" class="author">Marcel Overdijk</span><br>
<span id="revnumber">version 3.0.0.BUILD-SNAPSHOT</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">1. Introduction to Hawaii</a>
<ul class="sectlevel2">
<li><a href="#introduction-spring-boot">1.1. Spring Boot</a></li>
</ul>
</li>
<li><a href="#getting-started">2. Getting Started with Hawaii</a></li>
<li><a href="#features">3. Hawaii Features</a>
<ul class="sectlevel2">
<li><a href="#features-environments">3.1. Environments</a></li>
<li><a href="#features-configuration-properties">3.2. Configuration properties</a></li>
<li><a href="#features-logging">3.3. Logging</a>
<ul class="sectlevel3">
<li><a href="#features-logging-kibana">3.3.1. Kibana</a></li>
<li><a href="#features-logging-kibana-cleanup">3.3.2. Kibana cleanup</a></li>
<li><a href="#features-logging-request-duration">3.3.3. Request duration</a></li>
<li><a href="#features-logging-request-id">3.3.4. Request id</a></li>
<li><a href="#features-logging-transaction-id">3.3.5. Transaction id</a></li>
<li><a href="#features-logging-user-details">3.3.6. User details</a></li>
<li><a href="#features-logging-request-response">3.3.7. Request/response</a></li>
<li><a href="#_class_method_name">3.3.8. Class Method Name</a></li>
</ul>
</li>
<li><a href="#features-hawaii-time">3.4. Hawaii Time</a></li>
<li><a href="#features-validation">3.5. Validation</a></li>
<li><a href="#features-web">3.6. Web</a>
<ul class="sectlevel3">
<li><a href="#features-web-global-exception-handler">3.6.1. Global Exception Handler</a></li>
<li><a href="#features-web-rest-representations">3.6.2. REST Representations</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#starters">4. Hawaii Starters</a>
<ul class="sectlevel2">
<li><a href="#starters-hawaii-starter">4.1. hawaii-starter</a></li>
<li><a href="#starters-hawaii-starter-logging">4.2. hawaii-starter-logging</a>
<ul class="sectlevel3">
<li><a href="#_how_to_use">4.2.1. How to use</a></li>
</ul>
</li>
<li><a href="#starters-hawaii-starter-rest">4.3. hawaii-starter-rest</a></li>
<li><a href="#starters-hawaii-starter-test">4.4. hawaii-starter-test</a></li>
<li><a href="#starters-hawaii-starter-async">4.5. hawaii-starter-async</a>
<ul class="sectlevel3">
<li><a href="#starters-hawaii-starter-async-executor-configuration">4.5.1. Executor configuration</a></li>
<li><a href="#starters-hawaii-starter-async-task-timeout">4.5.2. Task timeout</a></li>
<li><a href="#starters-hawaii-starter-async-usage">4.5.3. Usage</a></li>
<li><a href="#starters-hawaii-starter-async-components">4.5.4. Components</a></li>
<li><a href="#starters-hawaii-starter-async-processing">4.5.5. Processing</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#deployment">5. Deployment</a></li>
<li><a href="#appendix">Appendices</a>
<ul class="sectlevel2">
<li><a href="#appendix-hawaii-application-properties">Appendix A: Hawaii application properties</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div id="abstract" class="paragraph">
<p>E kūlia i ka nu’u. Strive to reach the highest.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">1. Introduction to Hawaii</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Hawaii Framework is a Java framework for developing Spring based applications.</p>
</div>
<div class="paragraph">
<p>It provides production-ready features and integrations based best practices and experience to boost projects.</p>
</div>
<div class="paragraph">
<p>The Hawaii Framework is developed internally at <a href="https://qnh.eu">QNH</a> and is used in projects for medium and large
enterprise customers.</p>
</div>
<div class="sect2">
<h3 id="introduction-spring-boot"><a class="anchor" href="#introduction-spring-boot"></a><a class="link" href="#introduction-spring-boot">1.1. Spring Boot</a></h3>
<div class="paragraph">
<p>Combining <a href="http://projects.spring.io/spring-boot">Spring Boot</a> and the Hawaii production-ready features and auto
configuration brings even more power and simplicity to developers, without sacrificing flexibility.</p>
</div>
<div class="paragraph">
<p>The Hawaii Framework also provides various Spring Boot Starters to automatically include the needed dependencies and
trigger the auto configuration of the Hawaii production-ready features.</p>
</div>
<div class="paragraph">
<p>But it is important to mention that most of the Hawaii features can also used without using Spring Boot.
In that case the desired features need to be configured manually by defining the appropriate Spring beans inside the
application&#8217;s context.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a><a class="link" href="#getting-started">2. Getting Started with Hawaii</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a><a class="link" href="#features">3. Hawaii Features</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO.</p>
</div>
<div class="sect2">
<h3 id="features-environments"><a class="anchor" href="#features-environments"></a><a class="link" href="#features-environments">3.1. Environments</a></h3>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect2">
<h3 id="features-configuration-properties"><a class="anchor" href="#features-configuration-properties"></a><a class="link" href="#features-configuration-properties">3.2. Configuration properties</a></h3>
<div class="paragraph">
<p>Working with configuration properties in for example a .yml file, the following rules should be applied:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Property naming should be done in kebab-case</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>    example-property:
       sub-property-value: foo</code></pre>
</div>
</div>
<div class="paragraph">
<p>More documentation TODO.</p>
</div>
</div>
<div class="sect2">
<h3 id="features-logging"><a class="anchor" href="#features-logging"></a><a class="link" href="#features-logging">3.3. Logging</a></h3>
<div class="paragraph">
<p>The Hawaii logging feature provides a number of filter beans which add information that can log information about requests.
The Hawaii logging is only usable in a servlet environment, because all filters use HttpServletRequest and HttpServletResponse
to obtain information.</p>
</div>
<div class="paragraph">
<p>The main purpose of Hawaii logging is to write structured information into log lines, in such a way that it can be parsed by elastic search (Kibana). A
specialized encoder is included to write out the log lines, as well as a bunch of filters that gather and, in some cases, create information to
be included in each message. Hawaii logging currently only contains a logback-based encoder, so Hawaii logging is only usable if you use
logback as your logging implementation.</p>
</div>
<div class="paragraph">
<p>The next sections describe the individual filters contained in the Hawaii logging module. For more information on disabling and configuring
individual filters, please refer to <a href="#starters-hawaii-starter-logging">the Hawaii logging starter</a>.</p>
</div>
<div class="sect3">
<h4 id="features-logging-kibana"><a class="anchor" href="#features-logging-kibana"></a><a class="link" href="#features-logging-kibana">3.3.1. Kibana</a></h4>
<div class="paragraph">
<p>The Kibana log filter gathers request data such as request method, uri and client ip address and stores it so it can be added to subsequent log
messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-kibana-cleanup"><a class="anchor" href="#features-logging-kibana-cleanup"></a><a class="link" href="#features-logging-kibana-cleanup">3.3.2. Kibana cleanup</a></h4>
<div class="paragraph">
<p>The Kibana cleanup filter empties all Kibana-specific data after the rest of the filter chain has been processed. It is intended to be used
early in the chain, such that the cleanup happens last.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-request-duration"><a class="anchor" href="#features-logging-request-duration"></a><a class="link" href="#features-logging-request-duration">3.3.3. Request duration</a></h4>
<div class="paragraph">
<p>This filter determines the duration of the request in milliseconds. It add the duration to the Kibana fields and logs it.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-request-id"><a class="anchor" href="#features-logging-request-id"></a><a class="link" href="#features-logging-request-id">3.3.4. Request id</a></h4>
<div class="paragraph">
<p>This filter generates a new request id, adds it to the Kibana fields and also writes it as a header on the response.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-transaction-id"><a class="anchor" href="#features-logging-transaction-id"></a><a class="link" href="#features-logging-transaction-id">3.3.5. Transaction id</a></h4>
<div class="paragraph">
<p>This filter reads an incoming transaction id from a request header, or generates a new one. The transaction id is written to a response header and
added to the Kibana fields. The ability to read an incoming transaction id provides the ability to have multiple requests, spanning multiple systems
within the same transaction.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-user-details"><a class="anchor" href="#features-logging-user-details"></a><a class="link" href="#features-logging-user-details">3.3.6. User details</a></h4>
<div class="paragraph">
<p>This filter retrieves the authenticated principal from the security context and stores the user name in the Kibana fields so that it gets
included in each log message. This filter is only instantiated if Spring security is found on the class path.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-logging-request-response"><a class="anchor" href="#features-logging-request-response"></a><a class="link" href="#features-logging-request-response">3.3.7. Request/response</a></h4>
<div class="paragraph">
<p>This filter logs the content type, size, headers and body of incoming requests, as well as the response status, headers and body. Optionally,
the filter can log the response to a file if it exceeds a certain threshold size.</p>
</div>
</div>
<div class="sect3">
<h4 id="_class_method_name"><a class="anchor" href="#_class_method_name"></a><a class="link" href="#_class_method_name">3.3.8. Class Method Name</a></h4>
<div class="paragraph">
<p>This filter retrieves the controller and the calling method, this will then be used to log it accordingly.
For example: controller Foo.java, with method helloWorld(), will be displayed as Foo.helloWorld.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="features-hawaii-time"><a class="anchor" href="#features-hawaii-time"></a><a class="link" href="#features-hawaii-time">3.4. Hawaii Time</a></h3>
<div class="paragraph">
<p><code>HawaiiTime</code> is not merely a convenient wrapper to instantiate new <code>java.time</code> date and time objects.
It provides an application wide <code>java.time.Clock</code> reference which is particular useful for unit testing.</p>
</div>
<div class="paragraph">
<p>It is similar to Joda&#8217;s <code>DateTimeUtils</code> which also allows setting a fixed current time.
However it is important to note that Joda&#8217;s <code>DateTimeUtils</code> uses a static variable to store the current time.
<code>HawaiiTime</code> does not take this approach. Instead the <code>HawaiiTime</code> bean needs to be injected in any class that needs to instantiate new date
and time objects. This approach is more flexible and e.g. has the benefit that unit tests can be run in parallel. See example usage below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">public class MyClass {

	private HawaiiTime hawaiiTime;

	public MyClass(HawaiiTime hawaiiTime) { <i class="conum" data-value="1"></i><b>(1)</b>
		this.hawaiiTime = hawaiiTime;
	}

	public void doSomethingWithDate() {
		ZonedDateTime dateTime = this.hawaiiTime.zonedDateTime(); <i class="conum" data-value="2"></i><b>(2)</b>
		// ...
	}
}


public class MyClassTests {

	@Test
	public void testDoSomethingWithDate() {
	    long millis = System.currentTimeMillis();
		HawaiiTime hawaiiTime = new HawaiiTime();
		hawaiiTime.useFixedClock(millis); <i class="conum" data-value="3"></i><b>(3)</b>
		MyClass myClass = new MyClass(hawaiiTime);
		myClass.doSomethingWithDate();
		// ...
	}
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Inject the <code>HawaiiTime</code> bean.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the injected <code>HawaiiTime</code> bean to instantiate new date and time objects.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In unit tests a fixed clock can be used to manipulate and predict the exact current time.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another benefit of using <code>HawaiiTime</code> is that a fixed time can be used in a running application to test how it behaves on a given date or
time.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Third-party libraries being used by the application do not use <code>HawaiiTime</code> and probably instantiate date and time objects based on
the <code>System</code> time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hawaii uses <code>UTC</code> as default timezone but this can be changed by setting the <code>hawaii.time.timezone</code> configuration property. The provided
value will be parsed by <code>java.time.ZoneId#of(String zoneId)</code> and supports different timezone formats like <code>UTC</code>, <code>Europe/Amsterdam</code> and
<code>GMT+1</code>.</p>
</div>
<div class="paragraph">
<p>The creation of the <code>HawaiiTime</code> bean can also be disabled by setting <code>hawaii.time.enabled</code> to <code>false</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="features-validation"><a class="anchor" href="#features-validation"></a><a class="link" href="#features-validation">3.5. Validation</a></h3>
<div class="paragraph">
<p>Hawaii&#8217;s validation mechanism can be used to validate any object. It basically validates values, collects validation errors and stores them
in a validation result. These validation errors are simple field / error code combinations.</p>
</div>
<div class="paragraph">
<p>Hawaii&#8217;s <code>Validator</code> is inspired on Spring&#8217;s <code>org.springframework.validation.Validator</code> mechanism. However Hawaii&#8217;s validator mechanism
uses it&#8217;s own <code>ValidationResult</code> instead of Spring&#8217;s <code>org.springframework.validation.Errors</code>. The main difference is that Hawaii&#8217;s
<code>ValidationResult</code> does not bind directly the object being validated. This also gives the possibility to add errors for specific keys that
are not direct properties of the object being validated.</p>
</div>
<div class="paragraph">
<p>Hawaii&#8217;s validation mechanism also provides additional sugar like Hamcrest matcher support to write human readable validating code,
the capability to validate and automatically throw a <code>ValidationException</code> in case of errors etc.</p>
</div>
<div class="paragraph">
<p>Like Spring&#8217;s validation mechanism the Hawaii validation mechanism also supports the notion of nested error paths which also stimulates to
re-use validators.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s take an example. Imagine a <code>Customer</code> object with common name, e-mail, and address fields. A validation result could for example
contain the following field / error code combinations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code class="language-properties" data-lang="properties">first_name = required <i class="conum" data-value="1"></i><b>(1)</b>
last_name = max_length_exceeded
email = invalid
addresses = primary_address_required <i class="conum" data-value="2"></i><b>(2)</b>
addresses[0].type = invalid <i class="conum" data-value="3"></i><b>(3)</b>
addresses[0].street_name = max_length_exceeded
addresses[0].postal_code = invalid
addresses[0].city = max_length_exceeded
addresses[0].country_code = required</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The field <code>first_name</code> has an <code>required</code> error code.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The field <code>adresses</code> (an array in this case) has <code>primary_address_required</code> error code.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The field <code>type</code> of the first address in the <code>addresses</code> array has a <code>invalid</code> error code.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The example demonstrates simple field errors (like <code>first_name</code>) but also storing errors for arrays and nested paths (<code>addresses[0].type</code>).
In theory a field could also have multiple error codes if needed.</p>
</div>
<div class="paragraph">
<p>Implementors should typically only implement the <code>org.hawaiiframework.sample.validator.Validator#validate(Object, ValidationResult)</code> method
as the other methods in the interface are already implemented using the interface&#8217;s default methods.</p>
</div>
<div class="paragraph">
<p>A generic <code>EmailValidator</code> would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import org.hawaiiframework.validation.ValidationResult;
import org.hawaiiframework.validation.Validator;
import org.springframework.stereotype.Component;

import java.util.regex.Pattern;

@Component
public class EmailValidator implements Validator&lt;String&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    public static final String EMAIL_PATTERN = "^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";

    private Pattern pattern;

    public EmailValidator() {
        this.pattern = Pattern.compile(EMAIL_PATTERN);
    }

    @Override
    public void validate(String email, ValidationResult validationResult) { <i class="conum" data-value="2"></i><b>(2)</b>
        if (!pattern.matcher(email).matches()) {
            validationResult.rejectValue("invalid"); <i class="conum" data-value="3"></i><b>(3)</b>
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement the <code>Validator</code> (in this case a <code>String</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Override the <code>Validator#validate(Object, ValidationResult)</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In case the e-mail is invalid, reject the value with error code <code>invalid</code> and store it in the validation result.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>CustomerValidator</code> would look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">import org.apache.commons.lang3.StringUtils;
import org.hawaiiframework.sample.validator.EmailValidator;
import org.hawaiiframework.validation.ValidationResult;
import org.hawaiiframework.validation.Validator;
import org.springframework.stereotype.Component;

import java.util.List;

import static org.hamcrest.Matchers.greaterThan;

@Component
public class CustomerInputValidator implements Validator&lt;CustomerInput&gt; { <i class="conum" data-value="1"></i><b>(1)</b>

    private final EmailValidator emailValidator;
    private final AddressValidator addressValidator;

    public CustomerInputValidator(final EmailValidator emailValidator,
            final AddressValidator addressValidator) { <i class="conum" data-value="2"></i><b>(2)</b>
        this.emailValidator = emailValidator;
        this.addressValidator = addressValidator;
    }

    @Override
    public void validate(CustomerInput customer, ValidationResult validationResult) { <i class="conum" data-value="3"></i><b>(3)</b>

        // first name validation
        String firstName = customer.getFirstName();
        if (StringUtils.isBlank(firstName)) {
            validationResult.rejectValue("first_name", "required");
        } else {
            validationResult.rejectValueIf(firstName.length(), greaterThan(25), "first_name",
                    "max_length_exceeded");
        }

        // last name validation
        String lastName = customer.getLastName();
        if (StringUtils.isBlank(lastName)) {
            validationResult.rejectValue("last_name", "required");
        } else {
            validationResult.rejectValueIf(lastName.length(), greaterThan(25), "last_name",
                    "max_length_exceeded");
        }

        // e-mail validation
        String email = customer.getEmail();
        if (StringUtils.isBlank(email)) {
            validationResult.rejectValue("email", "required");
        } else if (email.length() &gt; 100) {
            validationResult.rejectValue("email", "max_length_exceeded");
        } else {
            validationResult.pushNestedPath("email");
            emailValidator.validate(email, validationResult);
            validationResult.popNestedPath();
        }

        // adresses validation
        List&lt;Address&gt; addresses = customer.getAddresses();
        if (addresses == null || addresses.size() == 0) {
            validationResult.rejectValue("addresses", "required");
        } else {
            // addresses array validations
            long primaries = addresses.stream()
                    .filter(address -&gt; address.getType() == AddressType.PRIMARY)
                    .count();
            if (primaries == 0) {
                validationResult.rejectValue("addresses", "primary_address_required");
            } else if (primaries &gt; 1) {
                validationResult.rejectValue("addresses", "only_1_primary_address_allowed");
            }
            if (addresses.size() &gt; 3) {
                validationResult.rejectValue("addresses", "max_array_length_exceeded");
            }
            // address validations
            for (int i = 0; i &lt; addresses.size(); i++) {
                validationResult.pushNestedPath("addresses", i);
                addressValidator.validate(addresses.get(i), validationResult);
                validationResult.popNestedPath();
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Implement the <code>Validator</code> (in this case a <code>Customer</code>).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Inject other validators (<code>EmailValidator</code>, <code>AddressValidator</code>) to be re-used.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Override the <code>Validator#validate(Object, ValidationResult)</code> method.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="features-web"><a class="anchor" href="#features-web"></a><a class="link" href="#features-web">3.6. Web</a></h3>
<div class="sect3">
<h4 id="features-web-global-exception-handler"><a class="anchor" href="#features-web-global-exception-handler"></a><a class="link" href="#features-web-global-exception-handler">3.6.1. Global Exception Handler</a></h4>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect3">
<h4 id="features-web-rest-representations"><a class="anchor" href="#features-web-rest-representations"></a><a class="link" href="#features-web-rest-representations">3.6.2. REST Representations</a></h4>
<div class="paragraph">
<p>TODO.</p>
</div>
<div class="sect4">
<h5 id="features-web-rest-representations-input-converter"><a class="anchor" href="#features-web-rest-representations-input-converter"></a><a class="link" href="#features-web-rest-representations-input-converter">Input Converter</a></h5>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect4">
<h5 id="features-web-rest-representations-resource-assembler"><a class="anchor" href="#features-web-rest-representations-resource-assembler"></a><a class="link" href="#features-web-rest-representations-resource-assembler">Resource Assembler</a></h5>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starters"><a class="anchor" href="#starters"></a><a class="link" href="#starters">4. Hawaii Starters</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO.</p>
</div>
<div class="sect2">
<h3 id="starters-hawaii-starter"><a class="anchor" href="#starters-hawaii-starter"></a><a class="link" href="#starters-hawaii-starter">4.1. hawaii-starter</a></h3>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect2">
<h3 id="starters-hawaii-starter-logging"><a class="anchor" href="#starters-hawaii-starter-logging"></a><a class="link" href="#starters-hawaii-starter-logging">4.2. hawaii-starter-logging</a></h3>
<div class="paragraph">
<p>The <code>hawaii-starter-logging</code> delivers a fully configured set of filters that are added to the filter chain in the configured order. The
starter contains a default configuration, which can be overridden by adding properties to your configuration. The default configuration
consists of the filters listed in the table below.</p>
</div>
<div class="paragraph">
<p>Filters with a negative order are added to the filter chain before any filters that modify or wrap the request and/or response.
The UserDetailsFilter depends on Spring Security (it logs the authenticated Principal) and therefor has a higher order.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Default filter configuration</caption>
<colgroup>
<col style="width: 27.2727%;">
<col style="width: 18.1818%;">
<col style="width: 18.1818%;">
<col style="width: 36.3637%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filter</th>
<th class="tableblock halign-left valign-top">Enabled</th>
<th class="tableblock halign-left valign-top">Order</th>
<th class="tableblock halign-left valign-top">Additional properties</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kibana-log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-108</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>http-header: the header that contains the client ip address. Defaults to <code>X-Hawaii-Frontend-IP-Address</code>. If no such header is present, the filter uses the remote address from the request.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kibana-log-cleanup</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-110</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request-duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-109</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request-id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-106</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>http-header: the response header to which the request id will be writen. Defaults to <code>X-Hawaii-Request-Id</code>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">request-response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-105</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>fallbackToFile: write the response to a file if its size exceeds <code>maxLogSize</code>, default value is <code>true</code></p>
</li>
<li>
<p>directory: the directory where files are written to, defaults to <code>/tmp</code></p>
</li>
<li>
<p>maxLogSize: the maximum log size to write to the log, see <code>fallbackToFile</code>, default value is <code>50k</code></p>
</li>
<li>
<p>allowedContentTypes: For console logging, the allowed content types, empty means allow all. Default value:</p>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
<li>
<p>text/plain</p>
</li>
<li>
<p>text/xml</p>
</li>
</ul>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transaction-id:</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-107</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>http-header: the request header name that may contain an incoming transaction id, and the response header to which the transaction id is written. Defaults to X-Hawaii-Tx-Id`.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user-details</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>An example of the default configuration is available in <a href="#appendix-hawaii-application-properties">the appendix</a>.</p>
</div>
<div class="sect3">
<h4 id="_how_to_use"><a class="anchor" href="#_how_to_use"></a><a class="link" href="#_how_to_use">4.2.1. How to use</a></h4>
<div class="paragraph">
<p>In order to use Hawaii logging, you&#8217;ll need to define an appender that uses the <code>KibanaLogEventEncoder</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code>    &lt;appender name="kibana" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;log/idm-kibana.log&lt;/file&gt;
        &lt;encoder class="org.hawaiiframework.logging.logback.KibanaLogEventEncoder"/&gt;
        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;fileNamePattern&gt;${tomcat_logs}/hawaii-idm.log.%d{yyyy-MM-dd}.gz&lt;/fileNamePattern&gt;
            &lt;maxHistory&gt;10&lt;/maxHistory&gt;
        &lt;/rollingPolicy&gt;
    &lt;/appender&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="starters-hawaii-starter-rest"><a class="anchor" href="#starters-hawaii-starter-rest"></a><a class="link" href="#starters-hawaii-starter-rest">4.3. hawaii-starter-rest</a></h3>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect2">
<h3 id="starters-hawaii-starter-test"><a class="anchor" href="#starters-hawaii-starter-test"></a><a class="link" href="#starters-hawaii-starter-test">4.4. hawaii-starter-test</a></h3>
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
<div class="sect2">
<h3 id="starters-hawaii-starter-async"><a class="anchor" href="#starters-hawaii-starter-async"></a><a class="link" href="#starters-hawaii-starter-async">4.5. hawaii-starter-async</a></h3>
<div class="paragraph">
<p>The asynchronous request execution in Hawaii is built on top of the scheduling in Spring Framework, see the
<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#scheduling-annotation-support">Spring documentation</a>
for a baseline explanation.</p>
</div>
<div class="paragraph">
<p>There are two main additions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>More flexibility in executor configuration</p>
</li>
<li>
<p>Task timeout</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="starters-hawaii-starter-async-executor-configuration"><a class="anchor" href="#starters-hawaii-starter-async-executor-configuration"></a><a class="link" href="#starters-hawaii-starter-async-executor-configuration">4.5.1. Executor configuration</a></h4>
<div class="paragraph">
<p>The Hawaii async configuration allows the definition of executors. An executor can be viewed as a thread pool.
An executor configuration looks something like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>executors:
-
    name: default
    corePoolSize: 10
    keepAliveTime: 60
    maxPendingRequests: 60
    maxPoolSize: 60</pre>
</div>
</div>
<div class="paragraph">
<p>The lowest level of configuration is a task. Tasks are grouped into systems. A system could be some backend
system against which requests are executed, or a database on which queries are executed.
Each request or query represents a task in Hawaii async terminology. System and task configuration looks like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>systems:
  -
      name: mySystem
      defaultExecutor: myExecutor
      defaultTimeout: 3
      tasks:
        -
            method: myTask
            executor: mySpecialExecutor
            timeout: 1
        -
            method: myOtherTask</pre>
</div>
</div>
<div class="paragraph">
<p>As can be seen, an executor can be assigned on system level. This will be the default executor for all the tasks in the system,
unless a specific executor is configured for a task, such as <code>myTask</code> in the example. The same mechanism applies to the timeout settings.
It is therefore perfectly legal to configure a task without any properties. However, it remains necessary to define the task
in the configuration, otherwise it can&#8217;t be used, i.e. every task <strong>must</strong> be defined in the configuration.</p>
</div>
<div class="paragraph">
<p>Finally, there are some global properties:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>defaultExecutor: default
defaultTimeout: 10
asyncTimeoutExecutorPoolSize: 10</pre>
</div>
</div>
<div class="paragraph">
<p>These define the default executor and timeout. These defaults will be used if no executor or timeout is defined on either task or system.</p>
</div>
<div class="paragraph">
<p>The <code>asyncTimeoutExecutorPoolSize</code> property defines the number of threads that are used to run timeout tasks.
See <a href="#starters-hawaii-starter-async-task-timeout">task timeout</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="starters-hawaii-starter-async-task-timeout"><a class="anchor" href="#starters-hawaii-starter-async-task-timeout"></a><a class="link" href="#starters-hawaii-starter-async-task-timeout">4.5.2. Task timeout</a></h4>
<div class="paragraph">
<p>Another addition is automatically timing out tasks. For each task that is executed, the Hawaii async framework enqueues a
cancellation task into a separate executor. If the timeout moment arrives, the timeout task is executed and will attempt to abort the
actual task being executed. The actual task will remove the timeout task when it finishes, so if a task runs within its time limit,
the timeout task will never be run.</p>
</div>
</div>
<div class="sect3">
<h4 id="starters-hawaii-starter-async-usage"><a class="anchor" href="#starters-hawaii-starter-async-usage"></a><a class="link" href="#starters-hawaii-starter-async-usage">4.5.3. Usage</a></h4>
<div class="paragraph">
<p>In practice, using the Hawaii asynchronous framework is not that different from using Spring&#8217;s: asynchronous execution must be
enabled with <code>@EnableAsync</code> and methods that are to be executed asynchronously must be annotated with the <code>@Async</code> annotation,
and they must have a <code>Future</code> typed return value.</p>
</div>
<div class="paragraph">
<p>Additionally, an asynchronous configuration must be defined in the file identified by the <code>hawaii.async.configuration</code> property,
which is set to <code>./config/async-config.yml</code> by default.</p>
</div>
<div class="paragraph">
<p>The essential difference in usage is that where Spring allows the specification of an executor by specifying the value of the
<code>@Async</code> annotation, the Hawaii additions require specifying the <code>Task</code> name instead of the executor. The Hawaii async configuration will
take care of routing the execution to the correct <code>Executor</code>.</p>
</div>
<div class="sect4">
<h5 id="_http"><a class="anchor" href="#_http"></a><a class="link" href="#_http">HTTP</a></h5>
<div class="paragraph">
<p>To execute http requests using the Hawaii async framework, you&#8217;ll need to use the <code>HawaiiHttpComponentsClientHttpRequestFactory</code> to enable
timing out of tasks that run too long.</p>
</div>
<div class="paragraph">
<p>You can use the <code>LoggingClientHttpRequestInterceptor</code> to log requests and responses made over http. Note that since this interceptor
consumes the response, this will only work if you wrap the <code>HawaiiHttpComponentsClientHttpRequestFactory</code> in a
<code>org.springframework.http.client.BufferingClientHttpRequestFactory</code>, or take other measures to make sure the response can be read
more than once.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="starters-hawaii-starter-async-components"><a class="anchor" href="#starters-hawaii-starter-async-components"></a><a class="link" href="#starters-hawaii-starter-async-components">4.5.4. Components</a></h4>
<div class="paragraph">
<p>The following diagram shows the various components in the Hawaii async solution:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./resources/images/hawaii-async-task-overview.png" alt="hawaii async task overview">
</div>
</div>
<div class="paragraph">
<p>In the diagram, MethodX is the call that must be executed asynchronously, for example service or repository method. The <code>@Async</code>
annotation causes Spring to create a proxy around this method. The proxy locates the executor, which in the Hawaii case is a
<code>DelegatingExecutor</code> which will delegate to the real executor specified for the task. The executor takes the <code>MethodX Runnable</code>
and executes it on an available thread.</p>
</div>
<div class="paragraph">
<p>Additionally, a delayed (by the configured timeout) task, the <code>MethodX Guard</code> is created and passed to the <code>Delayed Guard Executor</code>.</p>
</div>
<div class="paragraph">
<p>Both tasks share the <code>Shared Task Context</code> which allows them to share logging context, and which also provides access for the
guarded task to remove the guard task upon completion, and for the guard task to abort the guarded task upon activation.</p>
</div>
</div>
<div class="sect3">
<h4 id="starters-hawaii-starter-async-processing"><a class="anchor" href="#starters-hawaii-starter-async-processing"></a><a class="link" href="#starters-hawaii-starter-async-processing">4.5.5. Processing</a></h4>
<div class="paragraph">
<p>The sequence below shows the components working together to execute a task.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./resources/generated/hawaii-async-task-overview-normal.svg" alt="hawaii async task overview normal" width="2875" height="2057">
</div>
</div>
<div class="paragraph">
<p>The sequence below shows the flow when a task times out.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./resources/generated/hawaii-async-task-overview-timeout.svg" alt="hawaii async task overview timeout" width="2844" height="2294">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment"><a class="anchor" href="#deployment"></a><a class="link" href="#deployment">5. Deployment</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>TODO.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix"><a class="anchor" href="#appendix"></a><a class="link" href="#appendix">Appendices</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="appendix-hawaii-application-properties"><a class="anchor" href="#appendix-hawaii-application-properties"></a><a class="link" href="#appendix-hawaii-application-properties">Appendix A: Hawaii application properties</a></h3>
<div class="paragraph">
<p>Various properties can be specified inside your <code>application.properties/application.yml</code> file or as command line switches.
This section provides a list of available Hawaii application properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code class="language-properties" data-lang="properties"># ===================================================================
# HAWAII PROPERTIES
#
# This sample file is provided as a guideline. Do NOT copy it in its
# entirety to your own application.               ^^^
# ===================================================================

# HAWAII SPRING BOOT DEFAULTS
spring:
  jackson:
	date-format: com.fasterxml.jackson.databind.util.ISO8601DateFormat
	property-naming-strategy: CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES
	serialization:
	  indent-output: false
	  write-dates-as-timestamps: false
	  write-date-timestamps-as-nanoseconds: false
logging:
  file: log/hawaii.log
  level:
	  org.hawaiiframework: INFO
	  org.springframework: INFO

   <a id="appendix-hawaii-application-properties-time"></a>
# HAWAII TIME
hawaii:
  time:
    enabled: true # Enable creation of the `HawaiiTime` bean.
    timezone: UTC # The timezone to use like `UTC`, `Europe/Amsterdam` or `GMT+1`.
     async:
       configuration: ./config/async-config.yml # location of the Hawaii async configuration file
     logging:
       filters:
         kibana-log-cleanup:
           enabled: true
           order: -900
         request-duration:
           enabled: true
           order: -800
         kibana-log:
           enabled: true
           order: -700
           http-header: X-Hawaii-Frontend-IP-Address
         transaction-type:
           enabled: true
           order: -600
         transaction-id:
           enabled: true
           order: -500
           http-header: X-Hawaii-Tx-Id
         request-id:
           enabled: true
           order: -400
           http-header: X-Hawaii-Request-Id
         request-response:
           enabled: true
           order: -300
           fallback-to-file: true
           directory: /tmp
           max-log-size: 50k
           # For console logging, the allowed content types, empty means allow all.
           allowed-content-types:
             - application/json
             - text/plain
             - text/xml
             - application/vnd.spring-boot.actuator.v1+json
         user-details:
           enabled: true
           order: 110

---

spring:
  profiles: dev
  jackson:
	serialization.indent-output: true
logging:
  level:
	org.hawaiiframework: DEBUG

---

spring:
  profiles: test

---

spring:
  profiles: prod</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.0.0.BUILD-SNAPSHOT<br>
Last updated 2019-08-09 07:15:06 UTC
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.js"></script>
<script>prettyPrint()</script>
</body>
</html>